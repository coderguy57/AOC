i â† â€¢FLines "input/day19.txt"
str â† â€¢Import "libs/strings.bqn"
towels  â† ", " str.Split âŠ‘i
c â† 2â†“i
StartsWith â† (âŠ¢âŸœâ‰ Ã—â†‘ËœâŸœâ‰ â‰¡âŠ¢)

Solve â† {
    pattern â† ğ•© 
    visited â† 1âˆ¾0â¥ŠËœâ‰ pattern

    Add â† { vâ†ğ•©âŠ‘visited â‹„ visited ğ•¨âŠ¸+âŒ¾(ğ•©âŠ¸âŠ‘)â†© â‹„ 0<v ? âŸ¨âŸ© ; â‰ğ•© }

    Try â† {
        len â† âŠ‘ğ•©
        v â† lenâŠ‘visited
        subpattern â† lenâ†“pattern
        âˆ§(1â†“ğ•©) âˆ¾âˆ¾ {v Add ğ•©}Â¨ 1â†“len+âˆ§â·{subpattern StartsWith ğ•©} Â¨towels
    }
    Try â€¢_while_ {0â‰ â‰ ğ•©} â‰0
    Â¯1âŠ‘visited
}

# SolveÂ¨ â€¢_timed c
ways â† SolveÂ¨ c
sol1 â† +Â´ 0< ways
sol2 â† +Â´ ways

â€¢Show sol1â€¿sol2